#!/usr/bin/python

import sys
import os
import signal
import traceback


def script_path_ex():
   def iter_f():
      yield __file__
      yield sys.modules['__main__'].__file__
      yield os.path.abspath(sys.argv[0])
      yield os.getenv('Y_SCRIPT_PATH')

   for f in iter_f():
      if f:
         f = os.path.abspath(f)

         if os.path.isfile(f):
            return f

   return '<unknown>'


__file__ = script_path_ex()

os.environ['Y_SCRIPT_PATH]'] = __file__

signal.signal(signal.SIGPIPE, signal.SIG_IGN)
sys.dont_write_bytecode = True


if __name__ == '__main__':
   with open(__file__) as f:
      data1 = f.read()

   fp = os.path.dirname(__file__) + '/upm/release_me.py'

   with open(fp, 'r') as f:
      data2 = f.read()

   __text__ = data1 + data2

   exec compile(data2 + '\n\nbootstrap(-1)\n', fp, 'exec') in globals()
